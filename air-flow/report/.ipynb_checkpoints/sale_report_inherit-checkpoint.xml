<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <template id="sale_report_inherit_template" inherit_id="account.report_invoice_document">
        <xpath expr="//div[@name='address_not_same_as_shipping']" position="replace">
            <div class="col-6" name="address_not_same_as_shipping">
                <t t-set="address">
                    <strong>Billing Address:</strong>
                    <address class="mb-0" t-field="o.partner_id" t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                    <div t-if="o.partner_id.vat">
                        <t t-if="o.company_id.account_fiscal_country_id.vat_label" t-esc="o.company_id.account_fiscal_country_id.vat_label" id="inv_tax_id_label"/>
                        <t t-else="">Tax ID</t>: <span t-field="o.partner_id.vat"/>
                    </div>
                </t>
            </div>
        </xpath>
        
        <!-- Replace the Description with Customer PO -->
        <xpath expr="//th[@name='th_description']" position="replace">
            <th name="th_description" class="text-start"><span>Customer PO</span></th>
        </xpath>
        <!-- Remove the "Source Document" -->
        <xpath expr="//div[@t-if='o.invoice_origin']" position="replace">
        </xpath>
        <!-- Remove the priceunit and the taxes -->
        <xpath expr="//th[@name='th_priceunit']" position="replace"/>    
        <xpath expr="//th[@name='th_taxes']" position="replace"/>     
        <xpath expr="//span[@t-field='line.price_unit']/.." position="replace"/>     
        <xpath expr="//span[@id='line_tax_ids']/.." position="replace"/>
        
        <xpath expr="//div[@id='informations']" position="before">
            <div t-if="o.project_manager">
                <strong>Project Manager</strong>
                <p t-field="o.project_manager"/>
            </div>
            <div t-if="o.project_name">
                <strong>Project Name</strong>
                <p t-field="o.project_name"/>
            </div>
            <div t-if="o.ship_date">
                <strong>Ship Date</strong>
                <p t-field="o.ship_date"/>
            </div>
            <div t-if="o.shipping_method">
                <strong>Shipping Method</strong>
                <p t-field="o.shipping_method"/>
            </div>
        </xpath>
        
    </template>
    
    
    
    <template id = "sale_report_inherit_tax_template" inherit_id="account.tax_groups_totals">
        <xpath expr="//t" position="replace">
            
            <t t-if="tax_totals['groups_by_subtotal'][subtotal_to_show]">
                <t t-foreach="tax_totals['groups_by_subtotal'][subtotal_to_show]" t-as="amount_by_group">
                    <tr>
                        <t>
                            <td><span class="text-nowrap" t-esc="'Sales Tax'"/></td>
                            <td class="text-end o_price_total">
                                <span class="text-nowrap" t-esc="amount_by_group['formatted_tax_group_amount']" />
                            </td>
                        </t>
                    </tr>
                </t>
            </t>
        </xpath>
    </template>
    
    
    <template id="document_tax_totals_inherit_template" inherit_id="account.document_tax_totals">
        <xpath expr="//tr[@class='border-black o_total']" position="before">
            <t t-if="len(tax_totals['subtotals'])==0">
                <tr class="border-black o_subtotal">
                    <td><span class="text-nowrap" t-esc="'Tax Exempt'"/></td>
                    <td class="text-end o_price_total">
                        <span class="text-nowrap" t-esc="'0'" />
                    </td>
                </tr>
            </t>
        </xpath>
    </template>
    
</odoo>